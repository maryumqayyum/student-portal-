<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teacher Feedback</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="container">
<h2>Feedback for Your Courses</h2>
<div id="teacherFeedbackList"></div>
<button onclick="location.href='teacher_dashboard.html'">Back to Dashboard</button>
</div>

<script src="js/storage.js"></script>
<script>
Storage.seedIfNeeded();
const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
if(!currentUser || currentUser.role!=='teacher'){ alert('Login as teacher'); location.href='index.html'; }

const container = document.getElementById('teacherFeedbackList');
const fb = Storage.getFeedbackForTeacher(currentUser.id);

if(!fb.length){
    container.innerHTML = '<div>No feedback submitted yet for your courses.</div>';
} else {
    fb.forEach(f=>{
        const course = Storage.getCourse(f.courseId);
        const student = Storage.getUserById(f.studentId);
        if(course && student){
            const div = document.createElement('div');
            div.innerHTML = `<strong>${course.code} - ${course.title}</strong>: ${f.text} <small>(${student.name}, ${f.date})</small>`;
            container.appendChild(div);
        }
    });
}

</script>
</body>
</html>
